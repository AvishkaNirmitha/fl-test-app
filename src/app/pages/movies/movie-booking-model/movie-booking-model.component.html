<div class="display-flex mb-3 mr-4 mt-3">
  <i
    class="fa fa-times ml-auto font-1-4 cursor-pointer"
    aria-hidden="true"
    data-toggle="tooltip"
    data-placement="top"
    title="Close"
    (click)="closeModel()"
  ></i>
</div>
<h1 class="font-1-6 header-title text-center mb-4">
  Book Transformers One Movie
</h1>

<div class="font-1 mb-4 pl-4 pr-4">
  <div class="row">
    <div class="col-5">
      <img
        src="https://lk-aps.bmscdn.com/iedb/movies/images/mobile/thumbnail/xlarge/transformers-one-et00005460-06-09-2024-05-51-05.jpg"
        class="w-100"
        alt=""
      />
    </div>

    <div class="col-7">
      <div class="form-wrapper">
        <form role="form" [formGroup]="rForm">
          <div class="mt-1">
            <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">
              Full Ticket Count<span class="required-icon">*</span></mat-label
            >
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                placeholder="Enter Full Ticket Count"
                type="number"
                formControlName="fullSeatCount"
                autocomplete="new-password"
              />

              <mat-error
                *ngIf="
              rForm.controls['fullSeatCount']?.errors?.['required'] &&
                    rForm.controls['fullSeatCount']?.touched
                  "
                >Full Ticket Count is required</mat-error
              >
              <mat-error
                *ngIf=" (rForm.controls['fullSeatCount']?.errors?.['min'] ||
                  rForm.controls['fullSeatCount']?.errors?.['max']) &&
                rForm.controls['fullSeatCount']?.touched"
              >
                Full Ticket Count should be 1 to 100</mat-error
              >
            </mat-form-field>
          </div>

          <div class="mt-1">
            <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">
              Half Ticket Count<span class="required-icon">*</span></mat-label
            >
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                placeholder="Enter Half Ticket Count"
                type="number"
                formControlName="HalfSeatCount"
                autocomplete="new-password"
              />

              <mat-error
                *ngIf="
              rForm.controls['HalfSeatCount']?.errors?.['required'] &&
                    rForm.controls['HalfSeatCount']?.touched
                  "
                >Half Ticket Count is required</mat-error
              >
              <mat-error
                *ngIf=" (rForm.controls['HalfSeatCount']?.errors?.['min'] ||
                  rForm.controls['HalfSeatCount']?.errors?.['max']) &&
                rForm.controls['HalfSeatCount']?.touched"
              >
                Half Ticket Count should be 1 to 100</mat-error
              >
            </mat-form-field>
          </div>

          <div class="mt-1">
            <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">
              Book Date<span class="required-icon">*</span>
            </mat-label>
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                [matDatepicker]="picker"
                placeholder="Select Book Date"
                formControlName="bookDate"
                autocomplete="off"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>

              <mat-error
                *ngIf="
                    rForm.controls['bookDate']?.errors?.['required'] &&
                    rForm.controls['bookDate']?.touched
                  "
              >
                Book Date is required</mat-error
              >
            </mat-form-field>
          </div>

          <hr />

          <div class="d-flex justify-content-between mb-3 mt-1">
            <mat-label class="font-1-1 font-weight-600"> Total </mat-label>

            <div class="font-1-1 font-weight-600">
              {{ calTotal() | currency : "LKR " : "symbol" : "1.2-2" }}
            </div>
          </div>

          <button
            type="submit"
            mat-flat-button
            color="primary"
            class="w-100"
            (click)="handleWithdraw()"
            [disabled]="!rForm.valid && false"
          >
            proceed to checkout
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<app-loader *ngIf="loading"></app-loader>
